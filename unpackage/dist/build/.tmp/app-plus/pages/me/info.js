(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/info"],{"4f61":function(t,e,a){"use strict";(function(t){a("b554"),a("921b");n(a("66fd"));var e=n(a("d993"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},5516:function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=r(a("a34a")),i=r(a("769f"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,a,n,u,i,r){try{var o=t[i](r),s=o.value}catch(c){return void a(c)}o.done?e(s):Promise.resolve(s).then(n,u)}function s(t){return function(){var e=this,a=arguments;return new Promise(function(n,u){var i=t.apply(e,a);function r(t){o(i,n,u,r,s,"next",t)}function s(t){o(i,n,u,r,s,"throw",t)}r(void 0)})}}var c={data:function(){var t=this.getDate({format:!0});return{userId:"",image:"",nickname:"",signature:"",sex:1,birthday:t}},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},onLoad:function(){var e=this;t.getStorage({key:"user",success:function(t){e.userId=t.data.id}}),this.loadUserInfo()},methods:{loadUserInfo:function(){var t=this,e=i.default.apiHost+"/user/tUser/front/info/get/"+t.userId,a="GET";i.default.request(e,null,a).then(function(e){t.image=e.data.data.image,t.nickname=e.data.data.nickname,t.signature=e.data.data.signature,t.sex=e.data.data.sex,null!=e.data.data.birthday&&(t.birthday=e.data.data.birthday)})},formSubmit:function(e){var a=this,u=e.detail.value;u.id=a.userId,u.birthday=a.birthday,u.image=a.image,n("log",JSON.stringify(u)," at pages\\me\\info.vue:113");var r=i.default.apiHost+"/user/tUser/front/info",o="POST";i.default.request(r,u,o).then(function(e){1==e.data.code?(t.showToast({title:"修改成功",duration:2e3}),a.user=e.data.data):t.showToast({title:"修改失败",duration:2e3})})},DateChange:function(t){this.birthday=t.detail.value},getDate:function(t){var e=new Date,a=e.getFullYear(),n=e.getMonth()+1,u=e.getDate();return"start"===t?a-=60:"end"===t&&(a+=2),n=n>9?n:"0"+n,u=u>9?u:"0"+u,"".concat(a,"-").concat(n,"-").concat(u)},imageClick:function(){var e=s(u.default.mark(function e(){var a;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this,t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var u="",r="";t.getStorage({key:"user",success:function(t){r=t.data.token}}),t.uploadFile({url:i.default.apiHost+"/other/qiniu/file/upload",filePath:e.tempFilePaths[0],header:{"Content-Type":"multipart/form-data",token:r},name:"file",formData:{file:"file"},success:function(e){n("log","上传"," at pages\\me\\info.vue:185"),405===e.statusCode&&(n("log","未登陆"," at pages\\me\\info.vue:187"),t.navigateTo({url:"/pages/shilu-login/login"}));var i=JSON.parse(e.data);1===i.code&&(u=i.data,a.image=u,n("log","图片路径：==============="+a.image," at pages\\me\\info.vue:196"))}})}});case 2:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}()}};e.default=c}).call(this,a("6e42")["default"],a("0de9")["default"])},"6e0a":function(t,e,a){"use strict";a.r(e);var n=a("5516"),u=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=u.a},"6e5d":function(t,e,a){},"87e1":function(t,e,a){"use strict";var n=a("6e5d"),u=a.n(n);u.a},d993:function(t,e,a){"use strict";a.r(e);var n=a("e3d2"),u=a("6e0a");for(var i in u)"default"!==i&&function(t){a.d(e,t,function(){return u[t]})}(i);a("87e1");var r,o=a("f0c5"),s=Object(o["a"])(u["default"],n["b"],n["c"],!1,null,"75bc2a5c",null,!1,n["a"],r);e["default"]=s.exports},e3d2:function(t,e,a){"use strict";var n,u=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"b",function(){return u}),a.d(e,"c",function(){return i}),a.d(e,"a",function(){return n})}},[["4f61","common/runtime","common/vendor"]]]);