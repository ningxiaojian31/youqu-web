(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/details/details"],{"0a99":function(t,n,e){"use strict";var i=e("d4b0"),a=e.n(i);a.a},2702:function(t,n,e){"use strict";e.r(n);var i=e("3b23"),a=e("8a7e");for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);e("0a99");var u,d=e("f0c5"),l=Object(d["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],u);n["default"]=l.exports},"2bcb":function(t,n,e){"use strict";(function(t){e("b554"),e("921b");i(e("66fd"));var n=i(e("2702"));function i(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("6e42")["createPage"])},"3b23":function(t,n,e){"use strict";var i,a=function(){var t=this,n=t.$createElement;t._self._c},o=[];e.d(n,"b",function(){return a}),e.d(n,"c",function(){return o}),e.d(n,"a",function(){return i})},"8a7e":function(t,n,e){"use strict";e.r(n);var i=e("cf97"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,function(){return i[t]})}(o);n["default"]=a.a},cf97:function(t,n,e){"use strict";(function(t,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=u(e("a34a")),o=(u(e("b635")),u(e("769f")));function u(t){return t&&t.__esModule?t:{default:t}}function d(t,n,e,i,a,o,u){try{var d=t[o](u),l=d.value}catch(s){return void e(s)}d.done?n(l):Promise.resolve(l).then(i,a)}function l(t){return function(){var n=this,e=arguments;return new Promise(function(i,a){var o=t.apply(n,e);function u(t){d(o,i,a,u,l,"next",t)}function l(t){d(o,i,a,u,l,"throw",t)}u(void 0)})}}var s=function(){return e.e("components/mix-loading/mix-loading").then(e.bind(null,"0b5a"))},r={components:{mixLoading:s},data:function(){return{invId:0,userId:0,loading:!0,comContent:"",comSign:!1,detailData:{},detailInv:{},newsList:[],evaList:[]}},onLoad:function(n){this.detailData=JSON.parse(n.data),this.invId=this.detailData.id;var e=this;t.getStorage({key:"user",success:function(t){e.userId=t.data.id}}),this.loadDetailInv(),this.loadCollectStatus()},methods:{share:function(){t.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:"http://uniapp.dcloud.io/",title:"友趣社区",summary:"我正在使用友趣社区，快来一起来体验吧！",imageUrl:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/uni@2x.png",success:function(n){t.showToast({title:"分享成功",duration:2e3})},fail:function(n){t.showToast({title:"分享失败",duration:2e3})}})},invLaudAdd:function(){var n=this,e={userId:n.userId,poId:"laud-inv-"+n.invId},i=o.default.apiHost+"/invitation/tInvitation/laud/add",a="POST";o.default.request(i,e,a).then(function(e){t.showToast({title:"只能点一次赞哦~",duration:2e3}),n.loadDetailInv()})},comLaudAdd:function(n){var e=this,i={userId:e.userId,poId:"laud-com-"+e.invId+"-"+n},a=o.default.apiHost+"/invitation/tInvitation/laud/add",u="POST";o.default.request(a,i,u).then(function(n){t.showToast({title:"只能点一次赞哦~",duration:2e3}),e.loadDetailInv()})},invCollectAdd:function(){var n=this;if(n.comSign){var e={userId:"collect-inv-"+n.userId,poId:n.invId},i=o.default.apiHost+"/invitation/tInvitation/collect/move",a="POST";o.default.request(i,e,a).then(function(e){1==e.data.code&&(n.comSign=!1,t.showToast({title:"取消收藏成功",duration:2e3}))})}else{e={userId:"collect-inv-"+n.userId,poId:n.invId},i=o.default.apiHost+"/invitation/tInvitation/collect/add",a="POST";o.default.request(i,e,a).then(function(e){1==e.data.code&&(n.comSign=!0,t.showToast({title:"收藏成功",duration:2e3}))})}},loadCollectStatus:function(){var t=this,n={userId:"collect-inv-"+t.userId,poId:t.invId},e=o.default.apiHost+"/invitation/tInvitation/collect/or",i="POST";o.default.request(e,n,i).then(function(n){1==n.data.code&&(t.comSign=n.data.data)})},toPersonal:function(n){i("log","userId:"+n," at pages\\details\\details.vue:245"),t.navigateTo({url:"../me/personal?userId="+n})},sendMSg:function(){var n=this;if(null==n.comContent||""==n.comContent)t.showToast({title:"发表的评论不能为空哦~",duration:2e3});else{n=this;var e={userId:n.userId,invId:n.invId,comContent:n.comContent},i=o.default.apiHost+"/invitation/tComment/save",a="POST";o.default.request(i,e,a).then(function(e){1!=e.data.code?t.showToast({title:"发表评论失败,请稍后再试...",duration:2e3}):(t.showToast({title:"发表评论成功",duration:2e3}),n.loadDetailInv(),n.comContent=""),n.loading=!1}).catch(function(e){t.showToast({title:"服务器异常，发表评论失败...",duration:2e3}),n.loading=!1})}},loadDetailInv:function(){var n=l(a.default.mark(function n(){var e,u,d;return a.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:e=this,u=o.default.apiHost+"/invitation/tInvitation/front/get/"+e.invId,d="GET",o.default.request(u,null,d).then(function(n){if(1!=n.data.code)t.showToast({title:"稍后再试...",duration:2e3});else{i("log","加载详情: "+e.invId," at pages\\details\\details.vue:305"),e.detailInv=n.data.data;var a=e.detailInv.invImage;if(null!=a&&""!=a){var o=a.split(",");e.detailInv.invImage=o}e.evaList=e.detailInv.commentList}e.loading=!1}).catch(function(n){t.showToast({title:"服务器异常，请稍后再试...",duration:2e3}),e.loading=!1});case 4:case"end":return n.stop()}},n,this)}));function e(){return n.apply(this,arguments)}return e}()}};n.default=r}).call(this,e("6e42")["default"],e("0de9")["default"])},d4b0:function(t,n,e){}},[["2bcb","common/runtime","common/vendor"]]]);